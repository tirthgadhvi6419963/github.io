<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üíò For Aayushi</title>
  <meta name="theme-color" content="#ff4d6d" />
  <style>
    :root{
      --bg1:#ffebf3; --bg2:#ffe6cc;
      --card:rgba(255,255,255,.82);
      --text:#1f1f1f;
      --shadow:0 18px 50px rgba(0,0,0,.14);
      --radius:26px; --pill:999px;
      --pink1:#ff4d8d; --pink2:#ff2d55;
      --dark:#111;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      color:var(--text);
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 20% 20%, #fff 0%, transparent 60%),
        radial-gradient(900px 700px at 80% 30%, #fff 0%, transparent 55%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
    }

    /* Floating emojis */
    .hearts{position:fixed; inset:0; pointer-events:none; opacity:.5; z-index:0;}
    .heart{
      position:absolute; transform:translateY(110vh);
      animation:floaty linear infinite;
      will-change:transform,opacity; user-select:none;
    }
    @keyframes floaty{
      0%{transform:translateY(110vh) translateX(0) rotate(0deg); opacity:0}
      10%{opacity:1}
      100%{transform:translateY(-20vh) translateX(var(--drift)) rotate(var(--rot)); opacity:0}
    }

    canvas#confetti{
      position:fixed; inset:0; pointer-events:none; z-index:5;
    }

    .wrap{position:relative; z-index:1; min-height:100vh; display:grid; place-items:center; padding:18px;}
    .card{
      width:min(760px,92vw);
      background:var(--card);
      border:1px solid rgba(255,255,255,.55);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:26px 22px 20px;
      text-align:center;
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      position:relative;
      overflow:hidden;
    }
    h1{margin:0 0 8px; font-size:clamp(28px,5vw,44px); letter-spacing:-.02em;}
    .sub{margin:0 auto 14px; max-width:60ch; font-size:16px; opacity:.9; line-height:1.45;}
    .badge{
      display:inline-block;
      padding:8px 12px;
      border-radius:999px;
      background:rgba(255,59,122,.12);
      border:1px solid rgba(255,59,122,.22);
      font-weight:650;
      font-size:13px;
      margin-bottom:12px;
    }

    .playground{
      position:relative;
      height:300px;
      margin-top:10px;
      border-radius:18px;
      background:rgba(255,255,255,.65);
      border:1px dashed rgba(0,0,0,.14);
      overflow:hidden;
      touch-action: manipulation;
    }

    button{
      appearance:none; border:none; cursor:pointer;
      padding:14px 22px;
      border-radius:var(--pill);
      font-size:18px;
      font-weight:800;
      box-shadow:0 10px 22px rgba(0,0,0,.12);
      transition:transform .14s ease, filter .12s ease, box-shadow .2s ease, left .18s ease, top .18s ease;
      user-select:none; -webkit-tap-highlight-color:transparent;
    }
    button:hover{filter:brightness(1.02)}
    button:active{transform:scale(.98)}

    #yesBtn{
      position:absolute;
      left:50%;
      top:46%;
      transform:translate(-50%,-50%);
      background:linear-gradient(135deg,var(--pink1),var(--pink2));
      color:#fff;
      z-index:2;
    }
    #noBtn{
      position:absolute;
      left:50%;
      top:64%;
      transform:translate(-50%,-50%);
      background:var(--dark);
      color:#fff;
      z-index:3;
    }

    .hint{
      margin-top:10px;
      font-size:13px; opacity:.7;
      transition: opacity .3s;
      min-height: 18px;
    }

    /* Success screen */
    .success{
      display:none;
      animation: pop .35s ease both;
    }
    @keyframes pop{
      from{ transform: scale(.98); opacity:0 }
      to{ transform: scale(1); opacity:1 }
    }
    .bigHeart{
      font-size: 58px;
      margin: 6px 0 10px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,0.15));
      user-select:none;
    }
    .softRow{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap;
      margin-top:12px;
    }
    .miniBtn{
      font-size:13px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.10);
      box-shadow:none;
      font-weight:700;
    }
    .miniBtn:hover{background:#fff}

    .toast{
      position:fixed; left:50%; bottom:18px; transform:translateX(-50%);
      background: rgba(0,0,0,0.78);
      color:#fff;
      padding:10px 12px;
      border-radius: 12px;
      font-size: 13px;
      opacity:0;
      z-index:50;
      transition: opacity .2s ease, transform .2s ease;
    }
    .toast.show{ opacity:1; transform:translateX(-50%) translateY(-4px); }
  
    /* Celebrate burst emojis */
    .popEmoji{
      position:fixed;
      left:50%; top:50%;
      transform: translate(-50%,-50%);
      font-size: 18px;
      pointer-events:none;
      filter: drop-shadow(0 10px 14px rgba(0,0,0,.12));
      animation: emojiFly 900ms ease-out forwards;
      will-change: transform, opacity;
      z-index: 50;
    }
    @keyframes emojiFly{
      from{ opacity:1; transform: translate(-50%,-50%) scale(1); }
      to{
        opacity:0;
        transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy)))
                   rotate(var(--rot)) scale(1.25);
      }
    }

  </style>
</head>

<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="hearts"></div>

  <div class="wrap">
    <div class="card" id="cardRoot">

      <section id="ask">
        <div style="font-size:42px; user-select:none; margin-bottom:6px;">üíò</div>
        <div class="badge" id="badge">Aayushi exclusive</div>
        <h1 id="titleLine">Aayushi‚Ä¶ will you be my Valentine? üíñ</h1>
        <p class="sub" id="subLine">
          I tried to act normal‚Ä¶ but you‚Äôre too cute for that. So I made a tiny website.
          One question. Two buttons. Only one of them behaves üòÑ
        </p>

        <div class="playground" id="arena">
          <button id="yesBtn" aria-label="Yes">YES üíò</button>
          <button id="noBtn" aria-label="No">NO üôÉ</button>
        </div>

        <div class="hint" id="hintText">Tip: the ‚ÄúNO‚Äù button is allergic to commitment.</div>

        <div class="softRow">
          <button class="miniBtn" id="copyLinkBtn" type="button">Copy shareable link</button>
        </div>
      </section>

      <section class="success" id="success" aria-live="polite">
        <div class="badge">‚úÖ Locked in</div>
        <div class="bigHeart">üíñ</div>
        <h1>YAYYY! It‚Äôs a date üíû</h1>
        <p class="sub" id="successText">
          Aayushi, you just made my whole day (and probably my whole month too).
        </p>

        <div class="softRow">
          <button id="celebrateBtn">Celebrate üéâ</button>
          <button class="miniBtn" id="backBtn" type="button">Back</button>
        </div>
      </section>

    </div>
  </div>

  <div class="toast" id="toast">Copied!</div>

<script>
  // --- Personalization (optional): ?to=Aayushi&from=Tirth ---
  const params = new URLSearchParams(location.search);
  const toName = params.get("to") || "Aayushi";
  const fromName = params.get("from") || "Me";

  const titleLine = document.getElementById("titleLine");
  const subLine = document.getElementById("subLine");
  const successText = document.getElementById("successText");
  const badge = document.getElementById("badge");

  badge.textContent = `${toName} exclusive`;
  titleLine.textContent = `${toName}‚Ä¶ will you be my Valentine? üíñ`;
  successText.textContent = `${toName}, you just made ${fromName} ridiculously happy üíñ`;

  // --- Floating hearts background ---
  const heartsEl = document.getElementById('hearts');
  const heartChars = ["üíñ","üíò","üíï","üíó","üíì","üíù","‚ù§Ô∏è","üíû","‚ú®","ü•∞"];
  function makeHeart(){
    const s = document.createElement('div');
    s.className='heart';
    s.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
    const left = Math.random()*100;
    const dur = 6 + Math.random()*6;
    const drift = (Math.random()*140-70).toFixed(0)+'px';
    const rot = (Math.random()*220-110).toFixed(0)+'deg';
    const size = 16 + Math.random()*20;
    s.style.left = left+'vw';
    s.style.animationDuration = dur+'s';
    s.style.setProperty('--drift', drift);
    s.style.setProperty('--rot', rot);
    s.style.fontSize = size+'px';
    heartsEl.appendChild(s);
    setTimeout(()=>s.remove(), dur*1000);
  }
  for(let i=0;i<18;i++) setTimeout(makeHeart, i*180);
  setInterval(makeHeart, 420);

  // --- Confetti (canvas particles) ---
  const canvas = document.getElementById("confetti");
  const ctx = canvas.getContext("2d");
  let W, H;
  function resize(){
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }
  window.addEventListener("resize", resize);
  resize();

  let confetti = [];
  function burst(){
    const count = 180;
    for (let i=0; i<count; i++){
      // Cute confetti palette (mostly pinks + a few warm tones)
      const h = (Math.random() < 0.7)
        ? (330 + Math.random()*30)          // pink range
        : (15 + Math.random()*45);          // warm range
      confetti.push({
        x: W/2 + (Math.random()-0.5)*90,
        y: H/2 + (Math.random()-0.5)*50,
        vx: (Math.random()-0.5)*11,
        vy: -Math.random()*11 - 4,
        g: 0.20 + Math.random()*0.20,
        r: 2 + Math.random()*5,
        a: 1,
        spin: (Math.random()-0.5)*0.35,
        h
      });
    }
  }
  function tick(){
    ctx.clearRect(0,0,W,H);
    confetti = confetti.filter(p => p.a > 0.02 && p.y < H+40);
    for (const p of confetti){
      p.vy += p.g;
      p.x += p.vx;
      p.y += p.vy;
      p.a *= 0.985;
      ctx.save();
      ctx.globalAlpha = p.a;
      ctx.translate(p.x, p.y);
      ctx.rotate(p.spin);
      ctx.fillStyle = `hsl(${p.h} 95% 70%)`;
      ctx.fillRect(-p.r, -p.r, p.r*2, p.r*2);
      ctx.restore();
    }
    requestAnimationFrame(tick);
  }
  tick();

  // --- New YES/NO workflow ---
  const arena = document.getElementById("arena");
  const yesBtn = document.getElementById("yesBtn");
  const noBtn  = document.getElementById("noBtn");
  const hintText = document.getElementById("hintText");
  const ask = document.getElementById("ask");
  const success = document.getElementById("success");
  const celebrateBtn = document.getElementById("celebrateBtn");
  const backBtn = document.getElementById("backBtn");
  const bigHeart = document.querySelector(".bigHeart");

  let noDodges = 0;

  function placeNoRandom(){
    const a = arena.getBoundingClientRect();
    const b = noBtn.getBoundingClientRect();
    const margin = 10;

    const maxX = Math.max(margin, a.width - b.width - margin);
    const maxY = Math.max(margin, a.height - b.height - margin);

    const x = margin + Math.random() * (maxX - margin);
    const y = margin + Math.random() * (maxY - margin);

    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
    noBtn.style.transform = "translate(0,0)"; // we are using absolute px positioning now
  }

  function dodgeNo(){
    noDodges++;
    placeNoRandom();

    // Make NO a bit smaller each time (until tiny)
    const scale = Math.max(0.55, 1 - noDodges*0.08);
    noBtn.style.transform = `translate(0,0) scale(${scale})`;

    // Cute taunts
    const lines = [
      "Nope üòå",
      "Nice try üòÇ",
      "Not today üôÉ",
      "You can do better‚Ä¶ hit YES üòá",
      "The NO button is shy ü´£",
      "It ran away again üèÉ‚Äç‚ôÄÔ∏èüí®"
    ];
    hintText.textContent = lines[Math.min(lines.length-1, noDodges % lines.length)];
  }

  // NO dodges on hover, touch, and pointer down (so it basically can‚Äôt be clicked)
  noBtn.addEventListener("mouseenter", dodgeNo);
  noBtn.addEventListener("mousedown", (e)=>{ e.preventDefault(); dodgeNo(); });
  noBtn.addEventListener("touchstart", (e)=>{ e.preventDefault(); dodgeNo(); }, {passive:false});
  arena.addEventListener("touchstart", (e)=>{
    const t = e.touches && e.touches[0];
    if (!t) return;
    // if finger gets close to NO, dodge
    const nb = noBtn.getBoundingClientRect();
    const dist = Math.hypot(t.clientX - (nb.left+nb.width/2), t.clientY - (nb.top+nb.height/2));
    if (dist < 140) dodgeNo();
  }, {passive:false});

  // YES wins

  // --- Celebrate button should feel like a celebration ---
  let celebrated = 0;
  const celebrateLines = [
    () => `${toName}, I‚Äôd choose you in every universe üíû`,
    () => `Ok wow‚Ä¶ heart officially stolen üòµ‚Äçüí´üíò`,
    () => `You + me = peak cuteness ü•∞`,
    () => `Reminder: you‚Äôre my favorite person üíñ`,
    () => `Date idea: coffee + long walk + you smiling at me üíù`,
    () => `I‚Äôm smiling like an idiot right now üòÑ‚ú®`
  ];

  function emojiBurst(){
    const count = 18;
    for (let i=0; i<count; i++){
      const e = document.createElement("div");
      e.className = "popEmoji";
      e.textContent = heartChars[Math.floor(Math.random()*heartChars.length)];
      e.style.setProperty("--dx", `${(Math.random()-0.5)*320}px`);
      e.style.setProperty("--dy", `${(-Math.random()*260 - 70)}px`);
      e.style.setProperty("--rot", `${(Math.random()-0.5)*220}deg`);
      e.style.fontSize = `${14 + Math.random()*16}px`;
      document.body.appendChild(e);
      e.addEventListener("animationend", ()=>e.remove(), {once:true});
    }
  }

  function celebrate(){
    celebrated++;
    // More visible effect than a single burst
    burst(); emojiBurst();
    setTimeout(()=>{ burst(); }, 160);
    setTimeout(()=>{ burst(); emojiBurst(); }, 320);

    // Tiny haptic on phones (if allowed)
    try { if (navigator.vibrate) navigator.vibrate([25, 35, 25]); } catch(e){}

    // Rotate the heart + a cute line
    const heartPool = ["üíñ","üíò","üíù","üíï","üíû","‚ù§Ô∏è","‚ú®","ü•∞","üòç"];
    if (bigHeart) bigHeart.textContent = heartPool[Math.floor(Math.random()*heartPool.length)];

    const pick = celebrateLines[Math.floor(Math.random()*celebrateLines.length)];
    successText.textContent = pick();

    // Button text evolves
    celebrateBtn.textContent = celebrated === 1 ? "Celebrate again üéâ" : "MORE üéâ";
  }


  yesBtn.addEventListener("click", ()=>{
    ask.style.display = "none";
    success.style.display = "block";
    burst();
    emojiBurst();
  });

  celebrateBtn.addEventListener("click", celebrate);
backBtn.addEventListener("click", ()=>{
    success.style.display = "none";
    ask.style.display = "block";
    hintText.textContent = "Tip: the ‚ÄúNO‚Äù button is allergic to commitment.";
  });

  // Put NO in a slightly offset position (so it‚Äôs obvious at first)
  // Switch NO to pixel positioning once arena is laid out
  function initPositions(){
    // convert initial centered placement to absolute px inside arena
    const a = arena.getBoundingClientRect();
    const nb = noBtn.getBoundingClientRect();
    const x = (a.width/2) - (nb.width/2);
    const y = (a.height*0.64) - (nb.height/2);
    noBtn.style.left = x + "px";
    noBtn.style.top  = y + "px";
    noBtn.style.transform = "translate(0,0)";
  }
  window.addEventListener("load", initPositions);
  window.addEventListener("resize", initPositions);

  // Copy link (with to/from baked in)
  const toast = document.getElementById("toast");
  function showToast(msg){
    toast.textContent = msg;
    toast.classList.add("show");
    setTimeout(()=>toast.classList.remove("show"), 1200);
  }
  document.getElementById("copyLinkBtn").addEventListener("click", async () => {
    const base = location.origin + location.pathname;
    const link = base + `?to=${encodeURIComponent(toName)}&from=${encodeURIComponent(fromName)}`;
    try{
      await navigator.clipboard.writeText(link);
      showToast("Link copied üíå");
    }catch(e){
      showToast("Couldn‚Äôt auto-copy‚Äîcopy from the address bar");
    }
  });
</script>
</body>
</html>
